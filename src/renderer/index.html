<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gerenciamento de Arquivos - Hospital</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Tela de Login -->
    <div id="loginScreen" class="screen active">
        <div class="login-container">
            <div class="login-header">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
                <h1>Sistema de Arquivos</h1>
                <p>Hospital - Gestão de Documentos</p>
            </div>
            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <label for="username">Usuário</label>
                    <input type="text" id="username" class="form-control" required autocomplete="username">
                </div>
                <div class="form-group">
                    <label for="password">Senha</label>
                    <input type="password" id="password" class="form-control" required autocomplete="current-password">
                </div>
                <button type="submit" class="btn btn--primary btn--full-width">Entrar</button>
                <div id="loginError" class="error-message"></div>
            </form>
            <div class="login-footer">
                <p>Credenciais de teste:</p>
                <p><strong>Admin:</strong> admin / admin123</p>
                <p><strong>Operador:</strong> operador / senha123</p>
            </div>
        </div>
    </div>

    <!-- Tela Principal -->
    <div id="mainScreen" class="screen">
        <!-- Menu Lateral -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>Sistema de Arquivos</h2>
            </div>
            <nav class="sidebar-nav">
                <a href="#" data-view="dashboard" class="nav-item active">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7"></rect>
                        <rect x="14" y="3" width="7" height="7"></rect>
                        <rect x="14" y="14" width="7" height="7"></rect>
                        <rect x="3" y="14" width="7" height="7"></rect>
                    </svg>
                    <span>Dashboard</span>
                </a>
                <a href="#" data-view="gavetas" class="nav-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="2" y="4" width="20" height="5" rx="2"></rect>
                        <rect x="2" y="11" width="20" height="5" rx="2"></rect>
                        <rect x="2" y="18" width="20" height="2" rx="1"></rect>
                    </svg>
                    <span>Gavetas</span>
                </a>
                <a href="#" data-view="pastas" class="nav-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                    </svg>
                    <span>Pastas &amp; Envelopes</span>
                </a>
                <a href="#" data-view="solicitacoes" class="nav-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="12" y1="18" x2="12" y2="12"></line>
                        <line x1="9" y1="15" x2="15" y2="15"></line>
                    </svg>
                    <span>Solicitar Retirada</span>
                </a>
                <a href="#" data-view="minhasRetiradas" class="nav-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    <span>Meus Arquivos</span>
                </a>
                <a href="#" data-view="alertas" class="nav-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                        <line x1="12" y1="9" x2="12" y2="13"></line>
                        <line x1="12" y1="17" x2="12.01" y2="17"></line>
                    </svg>
                    <span>Alertas</span>
                </a>
                <a href="#" data-view="movimentacoes" class="nav-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="17 1 21 5 17 9"></polyline>
                        <path d="M3 11V9a4 4 0 0 1 4-4h14"></path>
                        <polyline points="7 23 3 19 7 15"></polyline>
                        <path d="M21 13v2a4 4 0 0 1-4 4H3"></path>
                    </svg>
                    <span>Movimentações</span>
                </a>
                <a href="#" data-view="arquivoMorto" class="nav-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 3h18v18H3z"></path>
                        <path d="M9 3v18"></path>
                        <path d="M15 3v18"></path>
                    </svg>
                    <span>Arquivo Morto</span>
                </a>
                <a href="#" data-view="relatorios" class="nav-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10 9 9 9 8 9"></polyline>
                    </svg>
                    <span>Relatórios</span>
                </a>
                <a href="#" data-view="admin" class="nav-item admin-only">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M12 1v6m0 6v6m5.2-13.2l-4.2 4.2m0 6l4.2 4.2m6-10.2h-6m-6 0H1m13.2 5.2l-4.2-4.2m0-6l4.2-4.2"></path>
                    </svg>
                    <span>Administração</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <div class="user-info">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    <div>
                        <div class="user-name" id="currentUserName"></div>
                        <div class="user-role" id="currentUserRole"></div>
                    </div>
                </div>
                <button id="logoutBtn" class="btn btn--outline btn--full-width">Sair</button>
            </div>
        </aside>

        <!-- Conteúdo Principal -->
        <main class="main-content">
            <!-- Dashboard -->
            <div id="dashboardView" class="view active">
                <div class="view-header">
                    <h1>Dashboard</h1>
                    <p>Visão geral do sistema</p>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: var(--color-bg-1);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="2" y="4" width="20" height="5" rx="2"></rect>
                                <rect x="2" y="11" width="20" height="5" rx="2"></rect>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="totalGavetas">0</div>
                            <div class="stat-label">Total de Gavetas</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: var(--color-bg-3);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="totalPastas">0</div>
                            <div class="stat-label">Total de Pastas</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: var(--color-bg-4);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="17 1 21 5 17 9"></polyline>
                                <path d="M3 11V9a4 4 0 0 1 4-4h14"></path>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="itensRetirados">0</div>
                            <div class="stat-label">Itens Retirados</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: var(--color-bg-5);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                                <line x1="12" y1="9" x2="12" y2="13"></line>
                                <line x1="12" y1="17" x2="12.01" y2="17"></line>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="gavetasCheias">0</div>
                            <div class="stat-label">Gavetas Cheias</div>
                        </div>
                    </div>
                </div>

                <div class="alerts-section" id="alertsSection"></div>
                
                <div class="section-header">
                    <h2>Itens Atualmente Retirados</h2>
                </div>
                <div id="itensRetiradosList" class="table-container"></div>
            </div>

            <!-- Gavetas -->
            <div id="gavetasView" class="view">
                <div class="view-header">
                    <h1>Gerenciamento de Gavetas</h1>
                    <div class="view-actions">
                        <button id="btnNovoGaveteiro" class="btn btn--primary">+ Novo Gaveteiro</button>
                        <button id="btnNovaGaveta" class="btn btn--secondary">+ Nova Gaveta</button>
                    </div>
                </div>
                <div id="gaveteirosContainer"></div>
            </div>

            <!-- Pastas e Envelopes -->
            <div id="pastasView" class="view">
                <div class="view-header">
                    <h1>Pastas &amp; Envelopes</h1>
                    <div class="view-actions">
                        <button id="btnNovaPasta" class="btn btn--primary">+ Nova Pasta</button>
                    </div>
                </div>
                <div class="search-bar">
                    <input type="text" id="searchPastas" class="form-control" placeholder="Buscar pasta por nome...">
                </div>
                <div id="pastasContainer" class="table-container"></div>
            </div>

            <!-- Solicitações -->
            <div id="solicitacoesView" class="view">
                <div class="view-header">
                    <h1>Solicitar Retirada de Arquivo</h1>
                </div>
                <div class="search-bar search-bar--dual">
                    <input type="text" id="searchFuncionarioNome" class="form-control" placeholder="Buscar por nome...">
                    <input type="text" id="searchFuncionarioMatricula" class="form-control" placeholder="Buscar por matrícula...">
                </div>
                <div id="funcionariosContainer" class="table-container"></div>
            </div>

            <!-- Minhas Retiradas -->
            <div id="minhasRetiradasView" class="view">
                <div class="view-header">
                    <h1>Meus Arquivos em Poder</h1>
                    <p>Arquivos que você retirou e precisa devolver</p>
                </div>
                <div id="minhasRetiradasContainer" class="table-container"></div>
            </div>

            <!-- Alertas -->
            <div id="alertasView" class="view">
                <div class="view-header">
                    <h1>Alertas de Vencimento</h1>
                    <p>Arquivos que precisam ser devolvidos urgentemente</p>
                </div>
                <div id="alertasContainer"></div>
            </div>

            <!-- Movimentações -->
            <div id="movimentacoesView" class="view">
                <div class="view-header">
                    <h1>Movimentações</h1>
                </div>
                <div class="search-bar">
                    <input type="text" id="searchMovimentacoes" class="form-control" placeholder="Buscar por pasta ou envelope...">
                </div>
                <div id="movimentacoesContainer" class="table-container"></div>
            </div>

            <!-- Relatórios -->
            <div id="relatoriosView" class="view">
                <div class="view-header">
                    <h1>Relatórios</h1>
                </div>
                <div class="relatorios-grid">
                    <div class="card">
                        <div class="card__body">
                            <h3>Inventário Completo</h3>
                            <p>Listagem de todas as gavetas, pastas e envelopes</p>
                            <button class="btn btn--primary" onclick="app.gerarRelatorioInventario()">Gerar Relatório</button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card__body">
                            <h3>Ocupação de Gavetas</h3>
                            <p>Status de ocupação de todas as gavetas</p>
                            <button class="btn btn--primary" onclick="app.gerarRelatorioOcupacao()">Gerar Relatório</button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card__body">
                            <h3>Histórico de Movimentações</h3>
                            <p>Todas as entradas e saídas registradas</p>
                            <button class="btn btn--primary" onclick="app.gerarRelatorioMovimentacoes()">Gerar Relatório</button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card__body">
                            <h3>Log de Auditoria</h3>
                            <p>Registro de todas as ações no sistema</p>
                            <button class="btn btn--primary" onclick="app.gerarRelatorioLogs()">Gerar Relatório</button>
                        </div>
                    </div>
                </div>
                <div id="relatorioResultado"></div>
            </div>

            <!-- Arquivo Morto -->
            <div id="arquivoMortoView" class="view">
                <div class="view-header">
                    <h1>Arquivo Morto</h1>
                    <p>Arquivos de funcionários desligados/demitidos</p>
                </div>
                <div id="arquivoMortoContainer" class="table-container"></div>
            </div>

            <!-- Administração -->
            <div id="adminView" class="view">
                <div class="view-header">
                    <h1>Administração</h1>
                </div>
                
                <!-- Aprovação de Solicitações (Admin) -->
                <div class="section-header">
                    <h2>Solicitações Pendentes de Aprovação</h2>
                </div>
                <div id="solicitacoesPendentesContainer" class="table-container" style="margin-bottom: 32px;"></div>

                <!-- Gerenciamento de Usuários -->
                <div class="section-header">
                    <h2>Gerenciamento de Usuários</h2>
                    <button id="btnNovoUsuario" class="btn btn--primary">+ Novo Usuário</button>
                </div>
                <div id="usuariosContainer" class="table-container"></div>
            </div>
        </main>
    </div>

    <!-- Modal Genérico -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Modal</h2>
                <button class="modal-close" onclick="app.closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody"></div>
            <div class="modal-footer" id="modalFooter">
                <button class="btn btn--outline" onclick="app.closeModal()">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Toast de Notificação -->
    <div id="toast" class="toast"></div>

    <!-- Scripts modulares -->
    <script src="js/utils/date-utils.js"></script>
    <script src="js/utils/dom-utils.js"></script>
    <script src="js/controllers/modal-controller.js"></script>
    <script src="js/database.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>
</html>